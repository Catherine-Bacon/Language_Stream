<html>
  <head>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 15px;
        width: 350px;
      }
      h1 {
        color: #e50914; /* Netflix Red */
        font-size: 1.5em;
        margin-top: 10px;
        margin-bottom: 5px; 
      }
      h2 {
        font-size: 1.1em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-top: 10px;    
        margin-bottom: 10px; 
      }
      label, p {
        font-size: 0.9em;
        color: #333;
      }
      select, button, input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        /* --- MODIFICATION 1: REMOVE margin-bottom from standard inputs/buttons --- */
        margin-bottom: 0px; 
        border-radius: 4px;
        border: 1px solid #ddd;
        box-sizing: border-box;
      }
      button {
        background-color: #e50914;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.2s;
        margin-top: 0; 
        /* --- MODIFICATION 2: Add back a small gap BELOW the primary button --- */
        margin-bottom: 5px;
      }
      button:hover {
        background-color: #f40a16;
      }
      /* Style for the Cancel button */
      button#cancelButton { 
        background-color: #777; 
        /* Add margin to separate from confirm button */
        margin-top: 5px; 
        /* --- MODIFICATION 3: Ensure no margin pushes the status box down --- */
        margin-bottom: 0px; 
        display: block; /* Use block to occupy space when visible */
      }
      button#cancelButton:hover {
        background-color: #999;
      }
      
      /* --- CRITICAL NEW FIX: Class to fully remove element from flow and size --- */
      .hidden-no-space {
          display: none !important;
          margin-top: 0 !important;
          margin-bottom: 0 !important;
          padding-top: 0 !important;
          padding-bottom: 0 !important;
          height: 0 !important;
          /* Setting visibility to hidden just in case, though display:none is primary */
          visibility: hidden !important; 
      }
      
      #statusBox {
        /* --- MODIFICATION 4: Standardize the gap ABOVE the status box to 10px & Center text --- */
        margin-top: 10px; 
        padding: 5px;
        border: 1px solid #eee;
        background-color: #f9f9f9;
        border-radius: 4px;
        text-align: center;
      }
      /* Simple Loading Bar CSS */
      #progressBarContainer {
        width: 100%;
        background-color: #ddd;
        border-radius: 5px;
        margin-top: 10px;
        overflow: hidden;
      }
      #progressBar {
        width: 0%;
        height: 15px;
        background-color: #4CAF50;
        text-align: center;
        line-height: 15px;
        color: white;
        transition: width 0.3s;
      }
      /* NEW STYLE FOR PREFERENCE SECTION */
      h3 { 
        font-size: 1.1em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-top: 10px;
        margin-bottom: 10px;
      }
      .checkbox-container {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      .checkbox-container input[type="checkbox"] {
        width: auto;
        margin-right: 10px;
      }
      /* NEW STYLE FOR RADIO BUTTONS */
      .radio-group {
        display: flex;
        /* --- MODIFICATION: Use flex-start and internal padding for better control --- */
        justify-content: flex-start;
        gap: 10px; /* Space between radio button labels */
        margin-bottom: 10px;
        padding: 5px 5px; /* Add internal padding to the group container */
        border: 1px solid #ddd;
        border-radius: 4px;
        flex-wrap: wrap; /* Allow wrapping if space is tight */
      }
      .radio-group label {
        display: flex;
        align-items: center;
        font-size: 0.9em;
        cursor: pointer;
        /* --- MODIFICATION: Add padding to each label to ensure clicking works easily --- */
        padding: 2px 5px; 
      }
      .radio-group input[type="radio"] {
        width: auto;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <h1>Language Stream</h1>

    <h2>1. Retrieve Subtitle URL</h2>
    <p>Open Netflix's player and  set subtitles to your Base Language</p>
    <p>Right click video player > Inspect</p>    
    <p>Press Network > Reload Page</p>
    <p>Search ?o= > Sort by name (descending)<p>
    <p>Right click the top name (starting with ?o=) > Copy > Copy URL</p>
    
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <p style="margin: 0; padding: 0;">Turn off Netflix subtitles and paste the URL below:</p>
    </div>
    <input type="text" id="subtitleUrlInput" placeholder="Paste Netflix TTML URL here" 
           value="">
    
    <h2>2. Select Language</h2>
    <p style="margin: 0; padding: 0; margin-top: 5px;">Language to Translate To:</p>
    <input type="text" id="targetLanguage" placeholder="Enter full language name (e.g., Spanish)" value="es">
    
    <h3>3. Select Preferences</h3>
    <div class="checkbox-container">
        <input type="checkbox" id="translatedOnlyCheckbox">
        <label for="translatedOnlyCheckbox">Show Translated Subtitles Only</label>
    </div>

    <p style="font-size: 0.9em; margin: 0; margin-top: 5px; color: #333;">Font Size:</p>
    <div id="fontSizeGroup" class="radio-group">
        <label>
            <input type="radio" name="fontSize" value="small" id="fontSizeSmall">
            Small
        </label>
        <label>
            <input type="radio" name="fontSize" value="medium" id="fontSizeMedium" checked>
            Medium
        </label>
        <label>
            <input type="radio" name="fontSize" value="large" id="fontSizeLarge">
            Large
        </label>
    </div>

    <p style="font-size: 0.9em; margin: 0; margin-top: 5px; color: #333;">Background Color:</p>
    <div id="backgroundColorGroup" class="radio-group">
        <label>
            <input type="radio" name="backgroundColor" value="none" id="backgroundColorNone">
            None
        </label>
        <label>
            <input type="radio" name="backgroundColor" value="black" id="backgroundColorBlack" checked>
            Black
        </label>
        <label>
            <input type="radio" name="backgroundColor" value="gray" id="backgroundColorGray">
            Gray
        </label>
    </div>

    <p style="font-size: 0.9em; margin: 0; margin-top: 5px; color: #333;">Font Shadow:</p>
    <div id="fontShadowGroup" class="radio-group">
        <label>
            <input type="radio" name="fontShadow" value="none" id="fontShadowNone">
            None
        </label>
        <label>
            <input type="radio" name="fontShadow" value="black_shadow" id="fontShadowBlack" checked>
            Black
        </label>
        <label>
            <input type="radio" name="fontShadow" value="white_shadow" id="fontShadowWhite">
            White
        </label>
    </div>

    <p style="font-size: 0.9em; margin: 0; margin-top: 5px; color: #333;">Font Color:</p>
    <div id="fontColorGroup" class="radio-group">
        <label>
            <input type="radio" name="fontColor" value="white" id="fontColorWhite" checked>
            White
        </label>
        <label>
            <input type="radio" name="fontColor" value="yellow" id="fontColorYellow">
            Yellow
        </label>
        <label>
            <input type="radio" name="fontColor" value="cyan" id="fontColorCyan">
            Cyan
        </label>
    </div>

    <button id="confirmButton">Generate Subtitles</button>
    
    <button id="cancelButton" class="hidden-no-space">Cancel Subtitle Generation</button>

    <div id="statusBox">
      <p id="statusText">Waiting for URL...</p>
      <div id="progressBarContainer">
        <div id="progressBar"></div>
      </div>
    </div>
    
    <script src="popup.js"></script>
  </body>
</html>