<html>
  <head>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 15px;
        width: 350px;
      }
      h1 {
        color: #e50914; /* Netflix Red */
        font-size: 1.5em;
        margin-bottom: 5px; 
      }
      h2 {
        font-size: 1.1em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-top: 0px;    /* üõ†Ô∏è FIX 2: Reduced gap above h2 (was 5px, kept at 5px) */
        margin-bottom: 10px; /* üõ†Ô∏è FIX 3: Consistent gap below h2 (was 5px, kept at 5px) */
      }
      label, p {
        font-size: 0.9em;
        color: #333;
      }
      select, button, input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        margin-bottom: 10px; /* üõ†Ô∏è FIX 1: Set a consistent bottom margin for all inputs */
        border-radius: 4px;
        border: 1px solid #ddd;
        box-sizing: border-box;
      }
      button {
        background-color: #e50914;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.2s;
        margin-top: 0; 
      }
      button:hover {
        background-color: #f40a16;
      }
      /* Style for the Cancel button */
      button#cancelButton { 
        background-color: #777; 
        margin-top: 0px; 
        margin-bottom: 10px; /* üõ†Ô∏è FIX 1: Standardized gap above the status box */
        display: none; /* Default to hidden, shown when processing/complete */
      }
      button#cancelButton:hover {
        background-color: #999;
      }
      #statusBox {
        /* üõ†Ô∏è FIX 1: The margin-top must match or be slightly less than the button's margin-bottom
                   to ensure the gap is controlled by the button for consistency. */
        margin-top: 0px;
        padding: 0px;
        border: 1px solid #eee;
        background-color: #f9f9f9;
        border-radius: 4px;
        /* min-height: 15px; */
      }
      /* Simple Loading Bar CSS */
      #progressBarContainer {
        width: 100%;
        background-color: #ddd;
        border-radius: 5px;
        margin-top: 10px;
        overflow: hidden;
      }
      #progressBar {
        width: 0%;
        height: 15px;
        background-color: #4CAF50;
        text-align: center;
        line-height: 15px;
        color: white;
        transition: width 0.3s;
      }
      /* NEW STYLE FOR PREFERENCE SECTION */
      h3 { 
        font-size: 1.1em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-top: 20px;
        margin-bottom: 10px;
      }
      .checkbox-container {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      .checkbox-container input[type="checkbox"] {
        width: auto;
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Language Stream</h1>

    <h2>1. Retrieve Subtitle URL</h2>
    <p>Open Netflix's player and  set subtitles to your Base Language</p>
    <p>Right click video player > Inspect</p>    
    <p>Press Network > Reload Page</p>
    <p>Search ?o= > Sort by name (descending)<p>
    <p>Right click the top name (starting with ?o=) > Copy > Copy URL</p>
    
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <p style="margin: 0; padding: 0;">Paste the URL below:</p>
        <p id="detectedLanguageText" style="font-size: 0.8em; font-style: italic; color: #e50914; margin: 0; padding: 0;">
            Language not yet identified
        </p>
    </div>
    <input type="text" id="subtitleUrlInput" placeholder="Paste Netflix TTML URL here" 
           value="">
    
    <h2>2. Select Language</h2>
    <p style="margin: 0; padding: 0; margin-top: 5px;">Language to Translate To:</p>
    <select id="targetLanguage">
      <option value="es">Spanish</option>
      <option value="en">English</option>
      <option value="fr">French</option>
      <option value="de">German</option>
      <option value="ja">Japanese</option>
      <option value="ko">Korean</option>
    </select>
    
    <h3>3. Select Preferences</h3>
    <div class="checkbox-container">
        <input type="checkbox" id="translatedOnlyCheckbox">
        <label for="translatedOnlyCheckbox">Show **Translated Subtitles Only**</label>
    </div>

    <button id="confirmButton">Generate Subtitles</button>
    
    <button id="cancelButton">Cancel Subtitle Generation</button>

    <div id="statusBox">
      <p id="statusText">Waiting for URL...</p>
      <div id="progressBarContainer">
        <div id="progressBar"></div>
      </div>
    </div>
    
    <script src="popup.js"></script>
  </body>
</html>